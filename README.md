# AIê¸°ë°˜ í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ì„ í™œìš©í•œ ìŠ¤í† ë¦¬ êµ¬ì¡° ì˜ìƒ ìë™ ìƒì„± ê¸°ìˆ  ê°œë°œ

ì¼ê´€ì„±ì„ ìœ ì§€í•œ AI ì˜ìƒ ìƒì„±ê¸° (consistent-ai-video-generator)

## 2025-2-CECD2-1-whiteseolgi-08

2025í•™ë…„ë„ ë™êµ­ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ì „ê³µ ì¢…í•©ì„¤ê³„2 1ë¶„ë°˜ ë°±ì„¤ê¸°

## ğŸ§‘â€ğŸ¤â€ğŸ§‘ íŒ€ êµ¬ì„±

| í•™ê³¼      | ì´ë¦„  | ì—­í•                   |
|---------|-----|---------------------|
| ì»´í“¨í„°ê³µí•™ì „ê³µ | ê¹€í•´í™˜ | í”„ë¡œì íŠ¸ ì´ê´„(íŒ€ì¥), ëª¨ë“ˆ ì„¤ê³„ ë° í†µí•©, APIì„œë²„ ê°œë°œ, UI/UX ê°œë°œ  |
| ì»´í“¨í„°ê³µí•™ì „ê³µ | ë…¸ì •ìš° | ê°ì²´ì˜ ì¼ê´€ì„± ìœ ì§€ë¥¼ ìœ„í•œ ë ˆí¼ëŸ°ìŠ¤ ìƒì„±ë¶€ ê°œë°œ    |
| ì»´í“¨í„°ê³µí•™ì „ê³µ | ë¼ì¹˜í˜„ | ê°ì²´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•œ ì˜ìƒ ìƒì„±ë¶€ ê°œë°œ    |
| ì»´í“¨í„°ê³µí•™ì „ê³µ | ì•ˆí˜„ìš° | ìŠ¤í† ë¦¬ì˜ ì”¬/ì»· ì¶”ì¶œë¶€ ê°œë°œ           |

> ì§€ë„êµìˆ˜: ì»´í“¨í„°Â·AIí•™ë¶€ ê¹€ì§€í¬ êµìˆ˜
>
> ì‚°ì—…ì²´ ë©˜í† : (ì£¼)ìŠ¤íƒ€ì¼ë´‡ í—ˆì£¼ì¼ ì´ì‚¬

## âœï¸ í”„ë¡œì íŠ¸ ê°œìš”

ê¸°ì¡´ ì˜ìƒ ìƒì„± AI ê¸°ìˆ ì˜ í•œê³„ë¥¼ ê·¹ë³µí•´ ì—°ì†ëœ ì¥ë©´(ì”¬)ì—ì„œë„ ì¸ë¬¼, ë°°ê²½, ì‚¬ë¬¼ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” AI ì˜ìƒ ì œì‘ ì‹œìŠ¤í…œì„ êµ¬í˜„í•œë‹¤. ìŠ¤í† ë¦¬ì˜ ê°ì²´(ì¸ë¬¼, ë°°ê²½, ì‚¬ë¬¼)ë¥¼ ë¶„ì„í•˜ì—¬ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , ì‚¬ìš©ìê°€ ì…ë ¥í•œ ìŠ¤í† ë¦¬ë¼ì¸ì— ë§ì¶° ë ˆí¼ëŸ°ìŠ¤ì™€ í”„ë¡¬í”„íŠ¸ë¥¼ ìë™ìœ¼ë¡œ êµ¬ì„±í•˜ì—¬, ì¥ë©´ êµ¬ì„± ê°ì²´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” AI ì˜ìƒì„ ìƒì„±í•œë‹¤.
ë©€í‹°ëª¨ë‹¬ ê¸°ëŠ¥ì„ í†µí•´ í˜„ì‹¤ì˜ ê°ì²´ë¥¼ ì˜ìƒì— ë°˜ì˜í•˜ê³ , ì‹¤ì‚¬Â·ìˆ˜ì±„í™”Â·ì¼ëŸ¬ìŠ¤íŠ¸Â·ë™í™” ë“± ë‹¤ì–‘í•œ í™”í’ìœ¼ë¡œ ì˜ìƒì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ìµœì‹  AI ëª¨ë¸ì„ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆë„ë¡ ìœ ì—°í•œ êµ¬ì¡°ë¡œ ì„¤ê³„í•˜ì—¬, ìƒˆë¡œìš´ ìƒì„±í˜• ëª¨ë¸ì„ ë¹ ë¥´ê²Œ ì ìš©í•  ìˆ˜ ìˆë‹¤.

## ğŸ’¡ ë°°ê²½ ë° í•„ìš”ì„±

- ê¸°ì¡´ AI ì˜ìƒ ìƒì„± ëª¨ë¸ì€ ë‹¨ì¼ ì˜ìƒ ìƒì„±ì—ëŠ” ê°•ì ì„ ë³´ì´ë‚˜, ìŠ¤í† ë¦¬ êµ¬ì¡°ë¥¼ ê°–ì¶˜ ì—°ì†ëœ ì˜ìƒ ìƒì„±ì—ì„œëŠ” ê°ì²´(ì¸ë¬¼, ì‚¬ë¬¼, ë°°ê²½)ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ì–´ë µë‹¤ëŠ” í•œê³„ê°€ ìˆë‹¤.
- ìŠ¤í† ë¦¬ êµ¬ì¡° ì˜ìƒ ìƒì„± ì‹œ ì´ì „ ì˜ìƒì˜ ì†ì„±ì„ ìœ ì§€í•˜ì§€ ëª»í•˜ë©´ ì›í•˜ëŠ” ê²°ê³¼ë¬¼ì„ ë„ì¶œí•˜ê¸° ì–´ë µë‹¤.
- ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‚¬ìš©ìì˜ ì…ë ¥ì— ë”°ë¼ ìë™ìœ¼ë¡œ ê°ì²´ë¥¼ êµ¬ì„±í•˜ê³  ê° ì¥ë©´ì˜ ì¼ê´€ì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì´ í•„ìš”í•˜ë‹¤.

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
consistent-ai-video-generator/
â”œâ”€â”€ consistentvideo/              # í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
â”‚   â”œâ”€â”€ reference/                # ë ˆí¼ëŸ°ìŠ¤ ìƒì„± ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ synopsis_parser.py    # ìŠ¤í† ë¦¬ íŒŒì‹±
â”‚   â”‚   â”œâ”€â”€ synopsis_analyzer.py  # ìŠ¤í† ë¦¬ ë¶„ì„
â”‚   â”‚   â””â”€â”€ entity_creator.py     # ê°ì²´ ë ˆí¼ëŸ°ìŠ¤ ìƒì„±
â”‚   â”œâ”€â”€ story/                    # ì”¬/ì»· ì¶”ì¶œ ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ scene_generator.py    # ì”¬ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ cut_generator.py      # ì»· ìƒì„±
â”‚   â”‚   â””â”€â”€ call_gpt.py          # GPT API í˜¸ì¶œ
â”‚   â”œâ”€â”€ video/                    # ì˜ìƒ ìƒì„± ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ cut_image_generator.py # ì»· ì´ë¯¸ì§€ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ video_generator.py    # ì˜ìƒ ìƒì„±
â”‚   â”‚   â””â”€â”€ model_selector.py     # AI ëª¨ë¸ ì„ íƒ
â”‚   â”œâ”€â”€ multimodal/               # ë©€í‹°ëª¨ë‹¬ ê¸°ëŠ¥
â”‚   â”‚   â””â”€â”€ entity_editor.py      # ê°ì²´ í¸ì§‘
â”‚   â””â”€â”€ aimodel/                  # AI ëª¨ë¸ (ì˜ˆë¹„)
â”œâ”€â”€ api-server/                   # FastAPI ë°±ì—”ë“œ ì„œë²„
â”‚   â”œâ”€â”€ main.py                   # API ì—”ë“œí¬ì¸íŠ¸
â”‚   â””â”€â”€ requirements.txt          # Python ì˜ì¡´ì„±
â”œâ”€â”€ front-end/                    # Svelte í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/              # í˜ì´ì§€ ë¼ìš°íŒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ reference/       # ë ˆí¼ëŸ°ìŠ¤ ê´€ë ¨ í˜ì´ì§€
â”‚   â”‚   â”‚   â”œâ”€â”€ story/           # ìŠ¤í† ë¦¬ ê´€ë ¨ í˜ì´ì§€
â”‚   â”‚   â”‚   â””â”€â”€ video/           # ì˜ìƒ ê´€ë ¨ í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ lib/
â”‚   â”‚       â”œâ”€â”€ components/      # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚       â”œâ”€â”€ api.ts          # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚       â”œâ”€â”€ stores.ts       # ìƒíƒœ ê´€ë¦¬
â”‚   â”‚       â””â”€â”€ types.ts        # TypeScript íƒ€ì…
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ playground/                   # ê°œë°œ ë° í…ŒìŠ¤íŠ¸ìš© ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ test/                        # í…ŒìŠ¤íŠ¸ ë° ë°ëª¨ íŒŒì¼ ì €ì¥ í´ë”
```

## ğŸ› ï¸ ì‹œìŠ¤í…œ ì„¤ê³„

![FlowChart](docs/flowchart.png)

> ### 1. ê°ì²´ì˜ ì¼ê´€ì„± ìœ ì§€ë¥¼ ìœ„í•œ ë ˆí¼ëŸ°ìŠ¤ ìƒì„±ë¶€
>
> - ì‚¬ìš©ìê°€ ì…ë ¥í•œ ìŠ¤í† ë¦¬ì—ì„œ ì¸ë¬¼, ë°°ê²½, ì‚¬ë¬¼ ê°ì²´ ì¶”ì¶œ ë° ë ˆí¼ëŸ°ìŠ¤ ìƒì„±
> - ë©€í‹°ëª¨ë‹¬ì„ í†µí•´ í˜„ì‹¤ì˜ ê°ì²´ë¥¼ ë°˜ì˜í•œ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ìƒì„±
>
> ### 2. ìŠ¤í† ë¦¬ì˜ ì”¬/ì»· ì¶”ì¶œë¶€
>
> - ì‚¬ìš©ìê°€ ì…ë ¥í•œ ìŠ¤í† ë¦¬ì—ì„œ ì”¬ê³¼ ì»·ì„ ì¶”ì¶œ
>
> ### 3. ê°ì²´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•œ ì˜ìƒ ìƒì„±ë¶€
>
> - ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ ê°œë³„ ì»·ìœ¼ë¡œë¶€í„° ì¼ê´€ì„±ì´ ìœ ì§€ëœ AI ì˜ìƒì„ ìƒì„±
> - ì¥ë©´ ê°„ ê°ì²´ì˜ ì¼ê´€ì„± ìœ ì§€
> - ë‹¤ì–‘í•œ í™”í’ê³¼ ìŠ¤íƒ€ì¼ ì ìš©

ìœ„ ì„¸ ê°€ì§€ ìš”ì†Œë¥¼ ì´ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ìŠ¤í† ë¦¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì¥ë©´ ê°„ì¸ë¬¼, ë°°ê²½ ì‚¬ë¬¼ ê°ì²´ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ì˜ìƒì„ ìƒì„±í•œë‹¤.

#### ëª¨ë“ˆë³„ ìƒì„¸ ì„¤ëª…

##### 1. Reference Module (ë ˆí¼ëŸ°ìŠ¤ ìƒì„±)

- **synopsis_parser.py**: ì‚¬ìš©ì ì…ë ¥ ìŠ¤í† ë¦¬ íŒŒì‹±
- **synopsis_analyzer.py**: GPT APIë¥¼ í™œìš©í•œ ìŠ¤í† ë¦¬ ë¶„ì„ ë° ê°ì²´ ì¶”ì¶œ
- **entity_creator.py**: ì¶”ì¶œëœ ê°ì²´ë¡œë¶€í„° ë ˆí¼ëŸ°ìŠ¤ ì´ë¯¸ì§€ ìƒì„±

##### 2. Story Module (ì”¬/ì»· ìƒì„±)

- **scene_generator.py**: ìŠ¤í† ë¦¬ë¥¼ ì”¬ ë‹¨ìœ„ë¡œ ë¶„í• 
- **cut_generator.py**: ì”¬ì„ ì»· ë‹¨ìœ„ë¡œ ì„¸ë¶„í™”
- **call_gpt.py**: GPT API í˜¸ì¶œ ë° ì‘ë‹µ ì²˜ë¦¬

##### 3. Video Module (ì˜ìƒ ìƒì„±)

- **cut_image_generator.py**: ì»·ë³„ ì´ë¯¸ì§€ ìƒì„±
- **video_generator.py**: ì´ë¯¸ì§€ ì‹œí€€ìŠ¤ë¥¼ ì˜ìƒìœ¼ë¡œ í•©ì„±
- **model_selector.py**: ì‚¬ìš© ê°€ëŠ¥í•œ AI ëª¨ë¸ ê´€ë¦¬ ë° ì„ íƒ

##### 4. Multimodal Module (ë©€í‹°ëª¨ë‹¬ ì²˜ë¦¬)

- **entity_editor.py**: ì‚¬ìš©ì ì—…ë¡œë“œ ì´ë¯¸ì§€ ì²˜ë¦¬ ë° ë ˆí¼ëŸ°ìŠ¤ í†µí•©

## ğŸ“š ê¸°ìˆ  ìŠ¤íƒ

#### Backend

[![Backend Skills](https://skillicons.dev/icons?i=python,fastapi&theme=light)](https://skillicons.dev)

#### Frontend

[![Backend Skills](https://skillicons.dev/icons?i=nodejs,svelte&theme=light)](https://skillicons.dev)

### API ì„œë²„ ì„¤ê³„

#### ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

##### ìŠ¤í† ë¦¬ ê´€ë¦¬

```
POST   /api/story/parse
  - ì…ë ¥: { "story": "í…ìŠ¤íŠ¸ ìŠ¤í† ë¦¬" }
  - ì¶œë ¥: { "entities": [...], "synopsis": {...} }

GET    /api/story/scenes
  - ì¶œë ¥: [ { "scene_id": 1, "description": "...", "cuts": [...] } ]

POST   /api/story/cuts
  - ì…ë ¥: { "scene_id": 1, "cut_data": {...} }
  - ì¶œë ¥: { "cut_id": "...", "status": "created" }
```

##### ë ˆí¼ëŸ°ìŠ¤ ê´€ë¦¬

```
POST   /api/reference/generate
  - ì…ë ¥: { "entity_id": "...", "description": "..." }
  - ì¶œë ¥: { "reference_image_url": "...", "status": "generated" }

POST   /api/reference/upload
  - ì…ë ¥: FormData (image file)
  - ì¶œë ¥: { "reference_id": "...", "image_url": "..." }

PATCH  /api/reference/{id}
  - ì…ë ¥: { "description": "...", "image_url": "..." }
  - ì¶œë ¥: { "updated": true }
```

##### ì˜ìƒ ìƒì„±

```
POST   /api/video/generate
  - ì…ë ¥: { "style": "realistic", "cuts": [...] }
  - ì¶œë ¥: { "job_id": "...", "status": "processing" }

GET    /api/video/status/{job_id}
  - ì¶œë ¥: { "status": "completed", "progress": 100, "video_url": "..." }

GET    /api/video/download/{job_id}
  - ì¶œë ¥: Binary video file
```

## ğŸ’¿ ì„¤ì¹˜ ë° ì‹¤í–‰ ë°©ë²•

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- **Python 3.12 ì´ìƒ**
- **Node.js 18.x ì´ìƒ**
- **FFmpeg 4.4 ì´ìƒ**
- **Git**

### 1. í”„ë¡œì íŠ¸ í´ë¡ 

```bash
git clone https://github.com/CSID-DGU/2025-2-CECD2-1-whiteseolgi-08
cd 2025-2-CECD2-1-whiteseolgi-08
```

### 2. Backend ì„¤ì • ë° ì‹¤í–‰

#### 2-1. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜:

```bash
pip install -r requirements.txt
```

#### 2-2. API ì„œë²„ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
cd api-server
pip install -r requirements.txt
```

#### 2-3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  í•„ìš”í•œ API í‚¤ë¥¼ ì„¤ì •:

```bash
# .env íŒŒì¼ ì˜ˆì‹œ
OPENAI_API_KEY="openai_api_key_here"
RUNWAY_API_KEY="runway_api_key_here"
GEMINI_API_KEY="gemini_api_key_here"
```

#### 2-4. API ì„œë²„ ì‹¤í–‰

```bash
# api-server ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰
uvicorn main:app --reload --port 8000 --host 0.0.0.0
```

- `--reload`: ì½”ë“œ ë³€ê²½ ì‹œ ìë™ ì¬ì‹œì‘ (ê°œë°œ ëª¨ë“œ)
- `--port 8000`: í¬íŠ¸ 8000ì—ì„œ ì‹¤í–‰
- `--host 0.0.0.0`: ëª¨ë“  ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì ‘ê·¼ í—ˆìš©

ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©´ ë‹¤ìŒ ì£¼ì†Œì—ì„œ API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ:

- Swagger UI: <http://localhost:8000/docs>
- ReDoc: <http://localhost:8000/redoc>

### 3. Frontend ì„¤ì • ë° ì‹¤í–‰

#### 3-1. npm íŒ¨í‚¤ì§€ ì„¤ì¹˜

ìƒˆ í„°ë¯¸ë„ì„ ì—´ê³  í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ:

```bash
cd front-end
npm i
```

#### 3-2. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
npm run dev -- --host
```

- `--host`: ë„¤íŠ¸ì›Œí¬ì˜ ë‹¤ë¥¸ ë””ë°”ì´ìŠ¤ì—ì„œë„ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •

### ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰ ë°©ë²• ì •ë¦¬

ì „ì²´ ì‹œìŠ¤í…œì„ ì‹¤í–‰í•˜ë ¤ë©´ ë‘ ê°œì˜ í„°ë¯¸ë„ì´ í•„ìš”:

**í„°ë¯¸ë„ 1 - Backend:**

```bash
cd api-server
uvicorn main:app --reload --port 8000 --host 0.0.0.0
```

**í„°ë¯¸ë„ 2 - Frontend:**

```bash
cd front-end
npm run dev -- --host
```

#### FFmpeg ê´€ë ¨ ì˜¤ë¥˜

FFmpegê°€ ì‹œìŠ¤í…œ PATHì— ìˆëŠ”ì§€ í™•ì¸:

```bash
ffmpeg -version
```

ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´:

- **Windows**: [FFmpeg ê³µì‹ ì‚¬ì´íŠ¸](https://ffmpeg.org/download.html)ì—ì„œ ë‹¤ìš´ë¡œë“œ
- **macOS**: `brew install ffmpeg`
- **Linux**: `sudo apt-get install ffmpeg` ë˜ëŠ” `sudo yum install ffmpeg`

## âœ¨ ê¸°ëŒ€íš¨ê³¼

### ìƒì„±í˜• AI ì˜ìƒ ê²°ê³¼ë¬¼ì˜ ì¼ê´€ì„± ìœ ì§€

ê° ì¥ë©´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ì–´ë ¤ì› ë˜ ì˜ìƒìƒì„± AIì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ì—¬, ê°ì²´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•œ ìŠ¤í† ë¦¬ êµ¬ì¡° ì˜ìƒì„ ìƒì„±

### ì˜ìƒ ì œì‘ ì§„ì…ì¥ë²½ ì™„í™”

1ì¸ í¬ë¦¬ì—ì´í„°ì™€ ê°™ì´ ì˜ìƒ ì œì‘ì„ ìœ„í•œ ì „ë¬¸ ê¸°ìˆ ì„ ê°–ì¶”ì§€ ì•Šë”ë¼ë„ **ìŠ¤í† ë¦¬ ì…ë ¥ë§Œìœ¼ë¡œ ì˜ìƒ ìƒì„±**ì´ ê°€ëŠ¥

### ë¯¸ë””ì–´ ë¯¹ìŠ¤

ì¢‹ì€ ì‘í’ˆ(ê¸€)ì´ ìˆì§€ë§Œ ì˜ìƒ ë“±ì˜ ë§¤ì²´ë¡œ í‘œí˜„í•  ì—¬ë ¥ì´ ì—†ëŠ” ì‘ê°€ë“¤ì—ê²Œ ìì‹ ì˜ ì‘í’ˆì„ ì†ì‰½ê²Œ ë‹¤ë¥¸ ë¯¸ë””ì–´ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µ
